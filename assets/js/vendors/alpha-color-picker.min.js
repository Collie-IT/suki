!function(d){function p(r){var i;return i=(r=r.replace(/ /g,"")).match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)?(i=100*parseFloat(r.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)[1]).toFixed(2),parseInt(i)):100}function u(r,i,a,t){var e,n,o;e=i.data("a8cIris"),n=i.data("wpWpColorPicker"),e._color._alpha=r,o=e._color.toString(),i.val(o),n.toggler.css({"background-color":o}),t&&"true"===showOpacity&&h(r,a),i.wpColorPicker("color",o)}function h(r,i){i.slider("value",r),i.find(".ui-slider-handle").text(r.toString())}Color.prototype.toString=function(r){if("no-alpha"==r)return this.toCSS("rgba","1").replace(/\s+/g,"");if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var i=parseInt(this._color,10).toString(16);if(this.error)return"";if(i.length<6)for(var a=6-i.length-1;0<=a;a--)i="0"+i;return"#"+i},d.fn.alphaColorPicker=function(){return this.each(function(){var e,t,r,n,o,i,a,c,l,s;(e=d(this)).wrap('<div class="alpha-color-picker-wrap"></div>'),r=e.attr("data-palette")||"true",n=e.attr("data-show-opacity")||"true",o=e.attr("data-default-color")||"",i=-1!==r.indexOf("|")?r.split("|"):"false"!=r,""==(t=e.val().replace(/\s+/g,""))&&(t=o),a={change:function(r,i){var a,t;a=e.wpColorPicker("color"),o==a&&"true"===n&&(t=p(a),l.find(".ui-slider-handle").text(t)),c.find(".transparency").css("background-color",i.color.toString("no-alpha")),d(this).val(a).trigger("change")},clear:function(r,i){d(this).val("").trigger("change")},palettes:i},e.wpColorPicker(a),c=e.parents(".wp-picker-container:first"),"true"===n&&(d('<div class="alpha-color-picker-container"><div class="min-click-zone click-zone"></div><div class="max-click-zone click-zone"></div><div class="alpha-slider"></div><div class="transparency"></div></div>').appendTo(c.find(".wp-picker-holder")),l=c.find(".alpha-slider"),s={create:function(r,i){var a=d(this).slider("value");d(this).find(".ui-slider-handle").text(a),d(this).siblings(".transparency ").css("background-color",t)},value:p(t),range:"max",step:1,min:0,max:100,animate:300},l.slider(s),c.find(".min-click-zone").on("click",function(){u(0,e,l,!0)}),c.find(".max-click-zone").on("click",function(){u(100,e,l,!0)}),l.slider().on("slide",function(r,i){u(parseFloat(i.value)/100,e,l,!1),d(this).find(".ui-slider-handle").text(i.value)})),c.find(".iris-palette").on("click",function(){var r=d(this).css("background-color");if("true"===n){var i=p(r);h(i,l),100!=i&&(r=r.replace(/[^,]+(?=\))/,(i/100).toFixed(2)))}e.wpColorPicker("color",r)}),c.find(".button.wp-picker-default").on("click",function(){"true"===n&&h(p(o),l)}),e.on("input",function(){var r=d(this).val();"true"===n&&h(p(r),l)})})}}(jQuery);