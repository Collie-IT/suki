!function(i){function t(i){var t;return(i=i.replace(/ /g,"")).match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)?(t=100*parseFloat(i.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)[1]).toFixed(2),t=parseInt(t)):t=100,t}function a(i,t,a,n){var o,e,c;o=t.data("a8cIris"),e=t.data("wpWpColorPicker"),o._color._alpha=i,c=o._color.toString(),t.val(c),e.toggler.css({"background-color":c}),n&&r(i,a),t.wpColorPicker("color",c)}function r(i,t){t.slider("value",i),t.find(".ui-slider-handle").text(i.toString())}Color.prototype.toString=function(i){if("no-alpha"==i)return this.toCSS("rgba","1").replace(/\s+/g,"");if(1>this._alpha)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var t=parseInt(this._color,10).toString(16);if(this.error)return"";if(t.length<6)for(var a=6-t.length-1;a>=0;a--)t="0"+t;return"#"+t},i.fn.alphaColorPicker=function(){return this.each(function(){var n,o,e,c,l,s,d,p,u,f;(n=i(this)).wrap('<div class="alpha-color-picker-wrap"></div>'),e=n.attr("data-palette")||"true",c=n.attr("data-show-opacity")||"true",l=n.attr("data-default-color")||"",s=-1!==e.indexOf("|")?e.split("|"):"false"!=e,""==(o=n.val().replace(/\s+/g,""))&&(o=l),d={change:function(i,a){var r,o,e;r=n.attr("data-customize-setting-link"),o=n.wpColorPicker("color"),l==o&&(e=t(o),u.find(".ui-slider-handle").text(e)),void 0!==wp.customize&&wp.customize(r,function(i){i.set(o)}),p.find(".transparency").css("background-color",a.color.toString("no-alpha"))},clear:function(i,t){var a=n.attr("data-customize-setting-link");void 0!==wp.customize&&wp.customize(a,function(i){i.set("")})},palettes:s},n.wpColorPicker(d),p=n.parents(".wp-picker-container:first"),i('<div class="alpha-color-picker-container"><div class="min-click-zone click-zone"></div><div class="max-click-zone click-zone"></div><div class="alpha-slider"></div><div class="transparency"></div></div>').appendTo(p.find(".wp-picker-holder")),u=p.find(".alpha-slider"),f={create:function(t,a){var r=i(this).slider("value");i(this).find(".ui-slider-handle").text(r),i(this).siblings(".transparency ").css("background-color",o)},value:t(o),range:"max",step:1,min:0,max:100,animate:300},u.slider(f),"true"==c&&u.find(".ui-slider-handle").addClass("show-opacity"),p.find(".min-click-zone").on("click",function(){a(0,n,u,!0)}),p.find(".max-click-zone").on("click",function(){a(100,n,u,!0)}),p.find(".iris-palette").on("click",function(){var a,o;r(o=t(a=i(this).css("background-color")),u),100!=o&&(a=a.replace(/[^,]+(?=\))/,(o/100).toFixed(2))),n.wpColorPicker("color",a)}),p.find(".button.wp-picker-default").on("click",function(){r(t(l),u)}),n.on("input",function(){r(t(i(this).val()),u)}),u.slider().on("slide",function(t,r){a(parseFloat(r.value)/100,n,u,!1),i(this).find(".ui-slider-handle").text(r.value)})})}}(jQuery);