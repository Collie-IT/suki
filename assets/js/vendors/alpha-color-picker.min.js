!function(i){function r(i){var r;return(i=i.replace(/ /g,"")).match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)?(r=100*parseFloat(i.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)[1]).toFixed(2),r=parseInt(r)):r=100,r}function a(i,r,a,n){var e,o,c;e=r.data("a8cIris"),o=r.data("wpWpColorPicker"),e._color._alpha=i,c=e._color.toString(),r.val(c),o.toggler.css({"background-color":c}),n&&"true"===showOpacity&&t(i,a),r.wpColorPicker("color",c)}function t(i,r){r.slider("value",i),r.find(".ui-slider-handle").text(i.toString())}Color.prototype.toString=function(i){if("no-alpha"==i)return this.toCSS("rgba","1").replace(/\s+/g,"");if(1>this._alpha)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var r=parseInt(this._color,10).toString(16);if(this.error)return"";if(r.length<6)for(var a=6-r.length-1;a>=0;a--)r="0"+r;return"#"+r},i.fn.alphaColorPicker=function(n){return void 0===n&&(n={}),this.each((function(){var e,o,c,l,s,d,p,u,h,f;(e=i(this)).wrap('<div class="alpha-color-picker-wrap"></div>'),c=e.attr("data-palette")||"true",l=e.attr("data-show-opacity")||"true",s=e.attr("data-default-color")||"",d=-1!==c.indexOf("|")?c.split("|"):"false"!=c,""==(o=e.val().replace(/\s+/g,""))&&(o=s),p={change:function(a,t){var o,c;o=e.wpColorPicker("color"),s==o&&"true"===l&&(c=r(o),h.find(".ui-slider-handle").text(c)),u.find(".transparency").css("background-color",t.color.toString("no-alpha")),i.isFunction(n.change)&&n.change.call(this,a)},clear:function(r,a){i.isFunction(n.clear)&&n.clear.call(this,r)},palettes:d},e.wpColorPicker(p),u=e.parents(".wp-picker-container:first"),"true"===l&&(i('<div class="alpha-color-picker-container"><div class="min-click-zone click-zone"></div><div class="max-click-zone click-zone"></div><div class="alpha-slider"></div><div class="transparency"></div></div>').appendTo(u.find(".wp-picker-holder")),h=u.find(".alpha-slider"),f={create:function(r,a){var t=i(this).slider("value");i(this).find(".ui-slider-handle").text(t),i(this).siblings(".transparency ").css("background-color",o)},value:r(o),range:"max",step:1,min:0,max:100,animate:300},h.slider(f),u.find(".min-click-zone").on("click",(function(){a(0,e,h,!0)})),u.find(".max-click-zone").on("click",(function(){a(100,e,h,!0)})),h.slider().on("slide",(function(r,t){a(parseFloat(t.value)/100,e,h,!1),i(this).find(".ui-slider-handle").text(t.value)}))),u.find(".iris-palette").on("click",(function(){var a=i(this).css("background-color");if("true"===l){var n=r(a);t(n,h),100!=n&&(a=a.replace(/[^,]+(?=\))/,(n/100).toFixed(2)))}e.wpColorPicker("color",a)})),u.find(".button.wp-picker-default").on("click",(function(){"true"===l&&t(r(s),h)})),e.on("input",(function(){"true"===l&&t(r(i(this).val()),h)}))}))}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZlbmRvcnMvYWxwaGEtY29sb3ItcGlja2VyLmpzIl0sIm5hbWVzIjpbIiQiLCJhY3BfZ2V0X2FscGhhX3ZhbHVlX2Zyb21fY29sb3IiLCJ2YWx1ZSIsImFscGhhVmFsIiwicmVwbGFjZSIsIm1hdGNoIiwicGFyc2VGbG9hdCIsInRvRml4ZWQiLCJwYXJzZUludCIsImFjcF91cGRhdGVfYWxwaGFfdmFsdWVfb25fY29sb3JfaW5wdXQiLCJhbHBoYSIsIiRpbnB1dCIsIiRhbHBoYVNsaWRlciIsInVwZGF0ZV9zbGlkZXIiLCJpcmlzIiwiY29sb3JQaWNrZXIiLCJjb2xvciIsImRhdGEiLCJfY29sb3IiLCJfYWxwaGEiLCJ0b1N0cmluZyIsInZhbCIsInRvZ2dsZXIiLCJjc3MiLCJzaG93T3BhY2l0eSIsImFjcF91cGRhdGVfYWxwaGFfdmFsdWVfb25fYWxwaGFfc2xpZGVyIiwid3BDb2xvclBpY2tlciIsInNsaWRlciIsImZpbmQiLCJ0ZXh0IiwiQ29sb3IiLCJwcm90b3R5cGUiLCJmbGFnIiwidGhpcyIsInRvQ1NTIiwiaGV4IiwiZXJyb3IiLCJsZW5ndGgiLCJpIiwiZm4iLCJhbHBoYUNvbG9yUGlja2VyIiwiY2FsbGJhY2tzIiwidW5kZWZpbmVkIiwiZWFjaCIsInN0YXJ0aW5nQ29sb3IiLCJwYWxldHRlSW5wdXQiLCJkZWZhdWx0Q29sb3IiLCJwYWxldHRlIiwiY29sb3JQaWNrZXJPcHRpb25zIiwiJGNvbnRhaW5lciIsInNsaWRlck9wdGlvbnMiLCJ3cmFwIiwiYXR0ciIsImluZGV4T2YiLCJzcGxpdCIsImNoYW5nZSIsImV2ZW50IiwidWkiLCJpc0Z1bmN0aW9uIiwiY2FsbCIsImNsZWFyIiwicGFsZXR0ZXMiLCJwYXJlbnRzIiwiYXBwZW5kVG8iLCJjcmVhdGUiLCJzaWJsaW5ncyIsInJhbmdlIiwic3RlcCIsIm1pbiIsIm1heCIsImFuaW1hdGUiLCJvbiIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkNBU0UsU0FBVUEsR0FrQ1gsU0FBU0MsRUFBZ0ND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LE1BQU9aLE9BR3lCVCxVQTNRcEQsQ0FpUkc0RCIsImZpbGUiOiJ2ZW5kb3JzL2FscGhhLWNvbG9yLXBpY2tlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQWxwaGEgQ29sb3IgUGlja2VyIEpTXG4gKlxuICogbW9kaWZpZWQ6XG4gKiAtIHJlbW92ZSBjdXN0b21pemVyIHNldHRpbmcgdHJpZ2dlcnMuXG4gKiAtIGFkZCBwYXJhbWV0ZXIgb24gbWFpbiBmdW5jdGlvbiBmb3IgY3VzdG9tIGNhbGxiYWNrcy5cbiAqIC0gZml4IGVycm9yIHdoZW4gc2hvd09wYWNpdHkgbW9kZSBpcyBub3QgYWN0aXZlLlxuICovXG5cbiggZnVuY3Rpb24oICQgKSB7XG5cblx0LyoqXG5cdCAqIE92ZXJyaWRlIHRoZSBzdG9jayBjb2xvci5qcyB0b1N0cmluZygpIG1ldGhvZCB0byBhZGQgc3VwcG9ydCBmb3Jcblx0ICogb3V0cHV0dGluZyBSR0JhIG9yIEhleC5cblx0ICovXG5cdENvbG9yLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCBmbGFnICkge1xuXG5cdFx0Ly8gSWYgb3VyIG5vLWFscGhhIGZsYWcgaGFzIGJlZW4gcGFzc2VkIGluLCBvdXRwdXQgUkdCYSB2YWx1ZSB3aXRoIDEwMCUgb3BhY2l0eS5cblx0XHQvLyBUaGlzIGlzIHVzZWQgdG8gc2V0IHRoZSBiYWNrZ3JvdW5kIGNvbG9yIG9uIHRoZSBvcGFjaXR5IHNsaWRlciBkdXJpbmcgY29sb3IgY2hhbmdlcy5cblx0XHRpZiAoICduby1hbHBoYScgPT0gZmxhZyApIHtcblx0XHRcdHJldHVybiB0aGlzLnRvQ1NTKCAncmdiYScsICcxJyApLnJlcGxhY2UoIC9cXHMrL2csICcnICk7XG5cdFx0fVxuXG5cdFx0Ly8gSWYgd2UgaGF2ZSBhIHByb3BlciBvcGFjaXR5IHZhbHVlLCBvdXRwdXQgUkdCYS5cblx0XHRpZiAoIDEgPiB0aGlzLl9hbHBoYSApIHtcblx0XHRcdHJldHVybiB0aGlzLnRvQ1NTKCAncmdiYScsIHRoaXMuX2FscGhhICkucmVwbGFjZSggL1xccysvZywgJycgKTtcblx0XHR9XG5cblx0XHQvLyBQcm9jZWVkIHdpdGggc3RvY2sgY29sb3IuanMgaGV4IG91dHB1dC5cblx0XHR2YXIgaGV4ID0gcGFyc2VJbnQoIHRoaXMuX2NvbG9yLCAxMCApLnRvU3RyaW5nKCAxNiApO1xuXHRcdGlmICggdGhpcy5lcnJvciApIHsgcmV0dXJuICcnOyB9XG5cdFx0aWYgKCBoZXgubGVuZ3RoIDwgNiApIHtcblx0XHRcdGZvciAoIHZhciBpID0gNiAtIGhleC5sZW5ndGggLSAxOyBpID49IDA7IGktLSApIHtcblx0XHRcdFx0aGV4ID0gJzAnICsgaGV4O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiAnIycgKyBoZXg7XG5cdH07XG5cblx0LyoqXG5cdCAqIEdpdmVuIGFuIFJHQmEsIFJHQiwgb3IgaGV4IGNvbG9yIHZhbHVlLCByZXR1cm4gdGhlIGFscGhhIGNoYW5uZWwgdmFsdWUuXG5cdCAqL1xuXHRmdW5jdGlvbiBhY3BfZ2V0X2FscGhhX3ZhbHVlX2Zyb21fY29sb3IoIHZhbHVlICkge1xuXHRcdHZhciBhbHBoYVZhbDtcblxuXHRcdC8vIFJlbW92ZSBhbGwgc3BhY2VzIGZyb20gdGhlIHBhc3NlZCBpbiB2YWx1ZSB0byBoZWxwIG91ciBSR0JhIHJlZ2V4LlxuXHRcdHZhbHVlID0gdmFsdWUucmVwbGFjZSggLyAvZywgJycgKTtcblxuXHRcdGlmICggdmFsdWUubWF0Y2goIC9yZ2JhXFwoXFxkK1xcLFxcZCtcXCxcXGQrXFwsKFteXFwpXSspXFwpLyApICkge1xuXHRcdFx0YWxwaGFWYWwgPSBwYXJzZUZsb2F0KCB2YWx1ZS5tYXRjaCggL3JnYmFcXChcXGQrXFwsXFxkK1xcLFxcZCtcXCwoW15cXCldKylcXCkvIClbMV0gKS50b0ZpeGVkKDIpICogMTAwO1xuXHRcdFx0YWxwaGFWYWwgPSBwYXJzZUludCggYWxwaGFWYWwgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YWxwaGFWYWwgPSAxMDA7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGFscGhhVmFsO1xuXHR9XG5cblx0LyoqXG5cdCAqIEZvcmNlIHVwZGF0ZSB0aGUgYWxwaGEgdmFsdWUgb2YgdGhlIGNvbG9yIHBpY2tlciBvYmplY3QgYW5kIG1heWJlIHRoZSBhbHBoYSBzbGlkZXIuXG5cdCAqL1xuXHQgZnVuY3Rpb24gYWNwX3VwZGF0ZV9hbHBoYV92YWx1ZV9vbl9jb2xvcl9pbnB1dCggYWxwaGEsICRpbnB1dCwgJGFscGhhU2xpZGVyLCB1cGRhdGVfc2xpZGVyICkge1xuXHRcdHZhciBpcmlzLCBjb2xvclBpY2tlciwgY29sb3I7XG5cblx0XHRpcmlzID0gJGlucHV0LmRhdGEoICdhOGNJcmlzJyApO1xuXHRcdGNvbG9yUGlja2VyID0gJGlucHV0LmRhdGEoICd3cFdwQ29sb3JQaWNrZXInICk7XG5cblx0XHQvLyBTZXQgdGhlIGFscGhhIHZhbHVlIG9uIHRoZSBJcmlzIG9iamVjdC5cblx0XHRpcmlzLl9jb2xvci5fYWxwaGEgPSBhbHBoYTtcblxuXHRcdC8vIFN0b3JlIHRoZSBuZXcgY29sb3IgdmFsdWUuXG5cdFx0Y29sb3IgPSBpcmlzLl9jb2xvci50b1N0cmluZygpO1xuXG5cdFx0Ly8gU2V0IHRoZSB2YWx1ZSBvZiB0aGUgaW5wdXQuXG5cdFx0JGlucHV0LnZhbCggY29sb3IgKTtcblxuXHRcdC8vIFVwZGF0ZSB0aGUgYmFja2dyb3VuZCBjb2xvciBvZiB0aGUgY29sb3IgcGlja2VyLlxuXHRcdGNvbG9yUGlja2VyLnRvZ2dsZXIuY3NzKHtcblx0XHRcdCdiYWNrZ3JvdW5kLWNvbG9yJzogY29sb3Jcblx0XHR9KTtcblxuXHRcdC8vIE1heWJlIHVwZGF0ZSB0aGUgYWxwaGEgc2xpZGVyIGl0c2VsZi5cblx0XHRpZiAoIHVwZGF0ZV9zbGlkZXIgKSB7XG5cdFx0XHRpZiAoICd0cnVlJyA9PT0gc2hvd09wYWNpdHkgKSB7XG5cdFx0XHRcdGFjcF91cGRhdGVfYWxwaGFfdmFsdWVfb25fYWxwaGFfc2xpZGVyKCBhbHBoYSwgJGFscGhhU2xpZGVyICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gVXBkYXRlIHRoZSBjb2xvciB2YWx1ZSBvZiB0aGUgY29sb3IgcGlja2VyIG9iamVjdC5cblx0XHQkaW5wdXQud3BDb2xvclBpY2tlciggJ2NvbG9yJywgY29sb3IgKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgdGhlIHNsaWRlciBoYW5kbGUgcG9zaXRpb24gYW5kIGxhYmVsLlxuXHQgKi9cblx0ZnVuY3Rpb24gYWNwX3VwZGF0ZV9hbHBoYV92YWx1ZV9vbl9hbHBoYV9zbGlkZXIoIGFscGhhLCAkYWxwaGFTbGlkZXIgKSB7XG5cdFx0JGFscGhhU2xpZGVyLnNsaWRlciggJ3ZhbHVlJywgYWxwaGEgKTtcblx0XHQkYWxwaGFTbGlkZXIuZmluZCggJy51aS1zbGlkZXItaGFuZGxlJyApLnRleHQoIGFscGhhLnRvU3RyaW5nKCkgKTtcblx0fVxuXG5cdCQuZm4uYWxwaGFDb2xvclBpY2tlciA9IGZ1bmN0aW9uKCBjYWxsYmFja3MgKSB7XG5cdFx0aWYgKCBjYWxsYmFja3MgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdGNhbGxiYWNrcyA9IHt9O1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gU2NvcGUgdGhlIHZhcnMuXG5cdFx0XHR2YXIgJGlucHV0LCBzdGFydGluZ0NvbG9yLCBwYWxldHRlSW5wdXQsIHNob3dPcGFjaXR5LCBkZWZhdWx0Q29sb3IsIHBhbGV0dGUsXG5cdFx0XHRcdGNvbG9yUGlja2VyT3B0aW9ucywgJGNvbnRhaW5lciwgJGFscGhhU2xpZGVyLCBhbHBoYVZhbCwgc2xpZGVyT3B0aW9ucztcblxuXHRcdFx0Ly8gU3RvcmUgdGhlIGlucHV0LlxuXHRcdFx0JGlucHV0ID0gJCggdGhpcyApO1xuXG5cdFx0XHQvLyBXZSBtdXN0IHdyYXAgdGhlIGlucHV0IG5vdyBpbiBvcmRlciB0byBnZXQgb3VyIGEgdG9wIGxldmVsIGNsYXNzXG5cdFx0XHQvLyBhcm91bmQgdGhlIEhUTUwgYWRkZWQgYnkgd3BDb2xvclBpY2tlcigpLlxuXHRcdFx0JGlucHV0LndyYXAoICc8ZGl2IGNsYXNzPVwiYWxwaGEtY29sb3ItcGlja2VyLXdyYXBcIj48L2Rpdj4nICk7XG5cblx0XHRcdC8vIEdldCBzb21lIGRhdGEgb2ZmIHRoZSBpbnB1dC5cblx0XHRcdHBhbGV0dGVJbnB1dCA9ICRpbnB1dC5hdHRyKCAnZGF0YS1wYWxldHRlJyApIHx8ICd0cnVlJztcblx0XHRcdHNob3dPcGFjaXR5ICA9ICRpbnB1dC5hdHRyKCAnZGF0YS1zaG93LW9wYWNpdHknICkgfHwgJ3RydWUnO1xuXHRcdFx0ZGVmYXVsdENvbG9yID0gJGlucHV0LmF0dHIoICdkYXRhLWRlZmF1bHQtY29sb3InICkgfHwgJyc7XG5cblx0XHRcdC8vIFByb2Nlc3MgdGhlIHBhbGV0dGUuXG5cdFx0XHRpZiAoIHBhbGV0dGVJbnB1dC5pbmRleE9mKCAnfCcgKSAhPT0gLTEgKSB7XG5cdFx0XHRcdHBhbGV0dGUgPSBwYWxldHRlSW5wdXQuc3BsaXQoICd8JyApO1xuXHRcdFx0fSBlbHNlIGlmICggJ2ZhbHNlJyA9PSBwYWxldHRlSW5wdXQgKSB7XG5cdFx0XHRcdHBhbGV0dGUgPSBmYWxzZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHBhbGV0dGUgPSB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBHZXQgYSBjbGVhbiBzdGFydGluZyB2YWx1ZSBmb3IgdGhlIG9wdGlvbi5cblx0XHRcdHN0YXJ0aW5nQ29sb3IgPSAkaW5wdXQudmFsKCkucmVwbGFjZSggL1xccysvZywgJycgKTtcblxuXHRcdFx0Ly8gSWYgd2UgZG9uJ3QgeWV0IGhhdmUgYSB2YWx1ZSwgdXNlIHRoZSBkZWZhdWx0IGNvbG9yLlxuXHRcdFx0aWYgKCAnJyA9PSBzdGFydGluZ0NvbG9yICkge1xuXHRcdFx0XHRzdGFydGluZ0NvbG9yID0gZGVmYXVsdENvbG9yO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTZXQgdXAgdGhlIG9wdGlvbnMgdGhhdCB3ZSdsbCBwYXNzIHRvIHdwQ29sb3JQaWNrZXIoKS5cblx0XHRcdGNvbG9yUGlja2VyT3B0aW9ucyA9IHtcblx0XHRcdFx0Y2hhbmdlOiBmdW5jdGlvbiggZXZlbnQsIHVpICkge1xuXHRcdFx0XHRcdHZhciBrZXksIHZhbHVlLCBhbHBoYSwgJHRyYW5zcGFyZW5jeTtcblxuXHRcdFx0XHRcdC8vIGtleSAgID0gJGlucHV0LmF0dHIoICdkYXRhLWN1c3RvbWl6ZS1zZXR0aW5nLWxpbmsnICk7XG5cdFx0XHRcdFx0dmFsdWUgPSAkaW5wdXQud3BDb2xvclBpY2tlciggJ2NvbG9yJyApO1xuXG5cdFx0XHRcdFx0Ly8gU2V0IHRoZSBvcGFjaXR5IHZhbHVlIG9uIHRoZSBzbGlkZXIgaGFuZGxlIHdoZW4gdGhlIGRlZmF1bHQgY29sb3IgYnV0dG9uIGlzIGNsaWNrZWQuXG5cdFx0XHRcdFx0aWYgKCBkZWZhdWx0Q29sb3IgPT0gdmFsdWUgKSB7XG5cdFx0XHRcdFx0XHRpZiAoICd0cnVlJyA9PT0gc2hvd09wYWNpdHkgKSB7XG5cdFx0XHRcdFx0XHRcdGFscGhhID0gYWNwX2dldF9hbHBoYV92YWx1ZV9mcm9tX2NvbG9yKCB2YWx1ZSApO1xuXHRcdFx0XHRcdFx0XHQkYWxwaGFTbGlkZXIuZmluZCggJy51aS1zbGlkZXItaGFuZGxlJyApLnRleHQoIGFscGhhICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gLy8gSWYgd2UncmUgaW4gdGhlIEN1c3RvbWl6ZXIsIHNlbmQgYW4gYWpheCByZXF1ZXN0IHRvIHdwLmN1c3RvbWl6ZVxuXHRcdFx0XHRcdC8vIC8vIHRvIHRyaWdnZXIgdGhlIFNhdmUgYWN0aW9uLlxuXHRcdFx0XHRcdC8vIGlmICggdHlwZW9mIHdwLmN1c3RvbWl6ZSAhPSAndW5kZWZpbmVkJyApIHtcblx0XHRcdFx0XHQvLyBcdHdwLmN1c3RvbWl6ZSgga2V5LCBmdW5jdGlvbiggb2JqICkge1xuXHRcdFx0XHRcdC8vIFx0XHRvYmouc2V0KCB2YWx1ZSApO1xuXHRcdFx0XHRcdC8vIFx0fSk7XG5cdFx0XHRcdFx0Ly8gfVxuXG5cdFx0XHRcdFx0JHRyYW5zcGFyZW5jeSA9ICRjb250YWluZXIuZmluZCggJy50cmFuc3BhcmVuY3knICk7XG5cblx0XHRcdFx0XHQvLyBBbHdheXMgc2hvdyB0aGUgYmFja2dyb3VuZCBjb2xvciBvZiB0aGUgb3BhY2l0eSBzbGlkZXIgYXQgMTAwJSBvcGFjaXR5LlxuXHRcdFx0XHRcdCR0cmFuc3BhcmVuY3kuY3NzKCAnYmFja2dyb3VuZC1jb2xvcicsIHVpLmNvbG9yLnRvU3RyaW5nKCAnbm8tYWxwaGEnICkgKTtcblxuXHRcdFx0XHRcdGlmICggJC5pc0Z1bmN0aW9uKCBjYWxsYmFja3MuY2hhbmdlICkgKSB7XG5cdFx0XHRcdFx0XHRjYWxsYmFja3MuY2hhbmdlLmNhbGwoIHRoaXMsIGV2ZW50ICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRjbGVhcjogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHtcblx0XHRcdFx0XHRpZiAoICQuaXNGdW5jdGlvbiggY2FsbGJhY2tzLmNsZWFyICkgKSB7XG5cdFx0XHRcdFx0XHRjYWxsYmFja3MuY2xlYXIuY2FsbCggdGhpcywgZXZlbnQgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHBhbGV0dGVzOiBwYWxldHRlIC8vIFVzZSB0aGUgcGFzc2VkIGluIHBhbGV0dGUuXG5cdFx0XHR9O1xuXG5cdFx0XHQvLyBDcmVhdGUgdGhlIGNvbG9ycGlja2VyLlxuXHRcdFx0JGlucHV0LndwQ29sb3JQaWNrZXIoIGNvbG9yUGlja2VyT3B0aW9ucyApO1xuXG5cdFx0XHQkY29udGFpbmVyID0gJGlucHV0LnBhcmVudHMoICcud3AtcGlja2VyLWNvbnRhaW5lcjpmaXJzdCcgKTtcblxuXHRcdFx0aWYgKCAndHJ1ZScgPT09IHNob3dPcGFjaXR5ICkge1xuXG5cdFx0XHRcdC8vIEluc2VydCBvdXIgb3BhY2l0eSBzbGlkZXIuXG5cdFx0XHRcdCQoICc8ZGl2IGNsYXNzPVwiYWxwaGEtY29sb3ItcGlja2VyLWNvbnRhaW5lclwiPicgK1xuXHRcdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtaW4tY2xpY2stem9uZSBjbGljay16b25lXCI+PC9kaXY+JyArXG5cdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1heC1jbGljay16b25lIGNsaWNrLXpvbmVcIj48L2Rpdj4nICtcblx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwiYWxwaGEtc2xpZGVyXCI+PC9kaXY+JyArXG5cdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cInRyYW5zcGFyZW5jeVwiPjwvZGl2PicgK1xuXHRcdFx0XHRcdCc8L2Rpdj4nICkuYXBwZW5kVG8oICRjb250YWluZXIuZmluZCggJy53cC1waWNrZXItaG9sZGVyJyApICk7XG5cblx0XHRcdFx0JGFscGhhU2xpZGVyID0gJGNvbnRhaW5lci5maW5kKCAnLmFscGhhLXNsaWRlcicgKTtcblxuXHRcdFx0XHQvLyBJZiBzdGFydGluZyB2YWx1ZSBpcyBpbiBmb3JtYXQgUkdCYSwgZ3JhYiB0aGUgYWxwaGEgY2hhbm5lbC5cblx0XHRcdFx0YWxwaGFWYWwgPSBhY3BfZ2V0X2FscGhhX3ZhbHVlX2Zyb21fY29sb3IoIHN0YXJ0aW5nQ29sb3IgKTtcblxuXHRcdFx0XHQvLyBTZXQgdXAgalF1ZXJ5IFVJIHNsaWRlcigpIG9wdGlvbnMuXG5cdFx0XHRcdHNsaWRlck9wdGlvbnMgPSB7XG5cdFx0XHRcdFx0Y3JlYXRlOiBmdW5jdGlvbiggZXZlbnQsIHVpICkge1xuXHRcdFx0XHRcdFx0dmFyIHZhbHVlID0gJCggdGhpcyApLnNsaWRlciggJ3ZhbHVlJyApO1xuXG5cdFx0XHRcdFx0XHQvLyBTZXQgdXAgaW5pdGlhbCB2YWx1ZXMuXG5cdFx0XHRcdFx0XHQkKCB0aGlzICkuZmluZCggJy51aS1zbGlkZXItaGFuZGxlJyApLnRleHQoIHZhbHVlICk7XG5cdFx0XHRcdFx0XHQkKCB0aGlzICkuc2libGluZ3MoICcudHJhbnNwYXJlbmN5ICcpLmNzcyggJ2JhY2tncm91bmQtY29sb3InLCBzdGFydGluZ0NvbG9yICk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR2YWx1ZTogYWxwaGFWYWwsXG5cdFx0XHRcdFx0cmFuZ2U6ICdtYXgnLFxuXHRcdFx0XHRcdHN0ZXA6IDEsXG5cdFx0XHRcdFx0bWluOiAwLFxuXHRcdFx0XHRcdG1heDogMTAwLFxuXHRcdFx0XHRcdGFuaW1hdGU6IDMwMFxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8vIEluaXRpYWxpemUgalF1ZXJ5IFVJIHNsaWRlciB3aXRoIG91ciBvcHRpb25zLlxuXHRcdFx0XHQkYWxwaGFTbGlkZXIuc2xpZGVyKCBzbGlkZXJPcHRpb25zICk7XG5cblx0XHRcdFx0Ly8gQmluZCBldmVudCBoYW5kbGVycyBmb3IgdGhlIGNsaWNrIHpvbmVzLlxuXHRcdFx0XHQkY29udGFpbmVyLmZpbmQoICcubWluLWNsaWNrLXpvbmUnICkub24oICdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGFjcF91cGRhdGVfYWxwaGFfdmFsdWVfb25fY29sb3JfaW5wdXQoIDAsICRpbnB1dCwgJGFscGhhU2xpZGVyLCB0cnVlICk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHQkY29udGFpbmVyLmZpbmQoICcubWF4LWNsaWNrLXpvbmUnICkub24oICdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGFjcF91cGRhdGVfYWxwaGFfdmFsdWVfb25fY29sb3JfaW5wdXQoIDEwMCwgJGlucHV0LCAkYWxwaGFTbGlkZXIsIHRydWUgKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Ly8gVXBkYXRlIGFsbCB0aGUgdGhpbmdzIHdoZW4gdGhlIHNsaWRlciBpcyBpbnRlcmFjdGVkIHdpdGguXG5cdFx0XHRcdCRhbHBoYVNsaWRlci5zbGlkZXIoKS5vbiggJ3NsaWRlJywgZnVuY3Rpb24oIGV2ZW50LCB1aSApIHtcblx0XHRcdFx0XHR2YXIgYWxwaGEgPSBwYXJzZUZsb2F0KCB1aS52YWx1ZSApIC8gMTAwLjA7XG5cblx0XHRcdFx0XHRhY3BfdXBkYXRlX2FscGhhX3ZhbHVlX29uX2NvbG9yX2lucHV0KCBhbHBoYSwgJGlucHV0LCAkYWxwaGFTbGlkZXIsIGZhbHNlICk7XG5cblx0XHRcdFx0XHQvLyBDaGFuZ2UgdmFsdWUgc2hvd24gb24gc2xpZGVyIGhhbmRsZS5cblx0XHRcdFx0XHQkKCB0aGlzICkuZmluZCggJy51aS1zbGlkZXItaGFuZGxlJyApLnRleHQoIHVpLnZhbHVlICk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBCaW5kIGV2ZW50IGhhbmRsZXIgZm9yIGNsaWNraW5nIG9uIGEgcGFsZXR0ZSBjb2xvci5cblx0XHRcdCRjb250YWluZXIuZmluZCggJy5pcmlzLXBhbGV0dGUnICkub24oICdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgY29sb3IgPSAkKCB0aGlzICkuY3NzKCAnYmFja2dyb3VuZC1jb2xvcicgKTtcblxuXHRcdFx0XHRpZiAoICd0cnVlJyA9PT0gc2hvd09wYWNpdHkgKSB7XG5cdFx0XHRcdFx0dmFyIGFscGhhID0gYWNwX2dldF9hbHBoYV92YWx1ZV9mcm9tX2NvbG9yKCBjb2xvciApO1xuXG5cdFx0XHRcdFx0YWNwX3VwZGF0ZV9hbHBoYV92YWx1ZV9vbl9hbHBoYV9zbGlkZXIoIGFscGhhLCAkYWxwaGFTbGlkZXIgKTtcblxuXHRcdFx0XHRcdC8vIFNvbWV0aW1lcyBJcmlzIGRvZXNuJ3Qgc2V0IGEgcGVyZmVjdCBiYWNrZ3JvdW5kLWNvbG9yIG9uIHRoZSBwYWxldHRlLFxuXHRcdFx0XHRcdC8vIGZvciBleGFtcGxlIHJnYmEoMjAsIDgwLCAxMDAsIDAuMykgYmVjb21lcyByZ2JhKDIwLCA4MCwgMTAwLCAwLjI5ODAzOSkuXG5cdFx0XHRcdFx0Ly8gVG8gY29tcGVuc2FudGUgZm9yIHRoaXMgd2Ugcm91bmQgdGhlIG9wYWNpdHkgdmFsdWUgb24gUkdCYSBjb2xvcnMgaGVyZVxuXHRcdFx0XHRcdC8vIGFuZCBzYXZlIGl0IGEgc2Vjb25kIHRpbWUgdG8gdGhlIGNvbG9yIHBpY2tlciBvYmplY3QuXG5cdFx0XHRcdFx0aWYgKCBhbHBoYSAhPSAxMDAgKSB7XG5cdFx0XHRcdFx0XHRjb2xvciA9IGNvbG9yLnJlcGxhY2UoIC9bXixdKyg/PVxcKSkvLCAoIGFscGhhIC8gMTAwICkudG9GaXhlZCggMiApICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0JGlucHV0LndwQ29sb3JQaWNrZXIoICdjb2xvcicsIGNvbG9yICk7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gQmluZCBldmVudCBoYW5kbGVyIGZvciBjbGlja2luZyBvbiB0aGUgJ0RlZmF1bHQnIGJ1dHRvbi5cblx0XHRcdCRjb250YWluZXIuZmluZCggJy5idXR0b24ud3AtcGlja2VyLWRlZmF1bHQnICkub24oICdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoICd0cnVlJyA9PT0gc2hvd09wYWNpdHkgKSB7XG5cdFx0XHRcdFx0dmFyIGFscGhhID0gYWNwX2dldF9hbHBoYV92YWx1ZV9mcm9tX2NvbG9yKCBkZWZhdWx0Q29sb3IgKTtcblxuXHRcdFx0XHRcdGFjcF91cGRhdGVfYWxwaGFfdmFsdWVfb25fYWxwaGFfc2xpZGVyKCBhbHBoYSwgJGFscGhhU2xpZGVyICk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBCaW5kIGV2ZW50IGhhbmRsZXIgZm9yIHR5cGluZyBvciBwYXN0aW5nIGludG8gdGhlIGlucHV0LlxuXHRcdFx0JGlucHV0Lm9uKCAnaW5wdXQnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCAndHJ1ZScgPT09IHNob3dPcGFjaXR5ICkge1xuXHRcdFx0XHRcdHZhciB2YWx1ZSA9ICQoIHRoaXMgKS52YWwoKSxcblx0XHRcdFx0XHRcdGFscGhhID0gYWNwX2dldF9hbHBoYV92YWx1ZV9mcm9tX2NvbG9yKCB2YWx1ZSApO1xuXG5cdFx0XHRcdFx0YWNwX3VwZGF0ZV9hbHBoYV92YWx1ZV9vbl9hbHBoYV9zbGlkZXIoIGFscGhhLCAkYWxwaGFTbGlkZXIgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxufSggalF1ZXJ5ICkpOyJdfQ==
