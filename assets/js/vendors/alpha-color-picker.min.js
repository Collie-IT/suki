!function(d){function p(i){var r;return r=(i=i.replace(/ /g,"")).match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)?(r=100*parseFloat(i.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)[1]).toFixed(2),parseInt(r)):100}function u(i,r,a,t){var n,e,o;n=r.data("a8cIris"),e=r.data("wpWpColorPicker"),n._color._alpha=i,o=n._color.toString(),r.val(o),e.toggler.css({"background-color":o}),t&&h(i,a),r.wpColorPicker("color",o)}function h(i,r){r.slider("value",i),r.find(".ui-slider-handle").text(i.toString())}Color.prototype.toString=function(i){if("no-alpha"==i)return this.toCSS("rgba","1").replace(/\s+/g,"");if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var r=parseInt(this._color,10).toString(16);if(this.error)return"";if(r.length<6)for(var a=6-r.length-1;0<=a;a--)r="0"+r;return"#"+r},d.fn.alphaColorPicker=function(){return this.each(function(){var n,t,i,r,e,a,o,c,l,s;(n=d(this)).wrap('<div class="alpha-color-picker-wrap"></div>'),i=n.attr("data-palette")||"true",r=n.attr("data-show-opacity")||"true",e=n.attr("data-default-color")||"",a=-1!==i.indexOf("|")?i.split("|"):"false"!=i,""==(t=n.val().replace(/\s+/g,""))&&(t=e),o={change:function(i,r){var a,t;a=n.wpColorPicker("color"),e==a&&(t=p(a),l.find(".ui-slider-handle").text(t)),c.find(".transparency").css("background-color",r.color.toString("no-alpha")),d(this).val(a).trigger("change")},clear:function(i,r){d(this).val("").trigger("change")},palettes:a},n.wpColorPicker(o),c=n.parents(".wp-picker-container:first"),"true"===r&&(d('<div class="alpha-color-picker-container"><div class="min-click-zone click-zone"></div><div class="max-click-zone click-zone"></div><div class="alpha-slider"></div><div class="transparency"></div></div>').appendTo(c.find(".wp-picker-holder")),l=c.find(".alpha-slider"),s={create:function(i,r){var a=d(this).slider("value");d(this).find(".ui-slider-handle").text(a),d(this).siblings(".transparency ").css("background-color",t)},value:p(t),range:"max",step:1,min:0,max:100,animate:300},l.slider(s),c.find(".min-click-zone").on("click",function(){u(0,n,l,!0)}),c.find(".max-click-zone").on("click",function(){u(100,n,l,!0)}),l.slider().on("slide",function(i,r){u(parseFloat(r.value)/100,n,l,!1),d(this).find(".ui-slider-handle").text(r.value)})),c.find(".iris-palette").on("click",function(){var i,r;h(r=p(i=d(this).css("background-color")),l),100!=r&&(i=i.replace(/[^,]+(?=\))/,(r/100).toFixed(2))),n.wpColorPicker("color",i)}),c.find(".button.wp-picker-default").on("click",function(){h(p(e),l)}),n.on("input",function(){h(p(d(this).val()),l)})})}}(jQuery);